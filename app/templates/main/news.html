<!-- templates/main/news.html -->

{% extends "base.html" %}
{% from "components/macros.html" import inner_page_hero %}

{% block title %}News & Media - Swahili Afro Jamboree{% endblock %}

{% block head %}
<style>
  /* Ensure proper line clamping for multi-line text truncation */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
{% endblock %}

{% block content %}
  <!-- News Hero Section -->
  <section class="relative overflow-hidden pt-20">
    <!-- Background image with overlay -->
    <div class="absolute inset-0 z-0">
      <img 
        src="{{ url_for('static', filename='img/news-hero.jpg') }}" 
        alt="Swahili cultural news" 
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-r from-[#003366]/90 to-[#003366]/70"></div>
    </div>

    <!-- Content -->
    <div class="container mx-auto px-4 py-16 md:py-24 relative z-10">
      <div class="max-w-3xl">
        <!-- Breadcrumb -->
        <div 
          x-data="{}"
          x-init="
            setTimeout(() => {
              $el.classList.add('opacity-100', 'translate-y-0');
              $el.classList.remove('opacity-0', 'translate-y-6');
            }, 100)
          "
          class="flex items-center gap-2 text-white/80 mb-6 opacity-0 translate-y-6 transition-all duration-500"
        >
          <a href="/" class="hover:text-[#2D8C9E] transition-colors">Home</a>
          <span class="mx-2 text-white/60">/</span>
          <span class="text-white">News & Media</span>
        </div>
        
        <!-- Main heading -->
        <h1 
          x-data="{}"
          x-init="
            setTimeout(() => {
              $el.classList.add('opacity-100', 'translate-y-0');
              $el.classList.remove('opacity-0', 'translate-y-6');
            }, 200)
          "
          class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 opacity-0 translate-y-6 transition-all duration-500"
        >
          News & Articles
        </h1>
        
        <!-- Subtitle -->
        <div 
          x-data="{}"
          x-init="
            setTimeout(() => {
              $el.classList.add('opacity-100', 'translate-y-0');
              $el.classList.remove('opacity-0', 'translate-y-6');
            }, 300)
          "
          class="inline-block px-4 py-1 rounded-full mb-6 bg-[#2D8C9E] text-white opacity-0 translate-y-6 transition-all duration-500"
        >
          <span class="font-medium">Stay Updated with Swahili Culture</span>
        </div>
        
        <!-- Description -->
        <p 
          x-data="{}"
          x-init="
            setTimeout(() => {
              $el.classList.add('opacity-100', 'translate-y-0');
              $el.classList.remove('opacity-0', 'translate-y-6');
            }, 400)
          "
          class="text-lg md:text-xl text-white/90 mb-8 leading-relaxed opacity-0 translate-y-6 transition-all duration-500"
        >
          Discover the latest news, events, and insights about Swahili culture, language, and community. From global recognitions to local celebrations, stay informed about everything happening in the Swahili cultural sphere.
        </p>
        
        <!-- Search -->
        <div 
          x-data="{}"
          x-init="
            setTimeout(() => {
              $el.classList.add('opacity-100', 'translate-y-0');
              $el.classList.remove('opacity-0', 'translate-y-6');
            }, 500)
          "
          class="relative max-w-lg opacity-0 translate-y-6 transition-all duration-500"
        >
          <form action="/news/search" method="get">
            <input 
              type="text" 
              name="q"
              placeholder="Search articles..." 
              class="w-full pl-10 py-6 pr-4 rounded-full border-white/20 bg-white/10 text-white placeholder:text-white/50 focus:border-[#2D8C9E] focus:ring focus:ring-[#2D8C9E]/20"
            />
            <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-white/70 size-5"></i>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Article Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-[#003366]">Featured Article</h2>
          <a href="/news/featured" class="text-[#2D8C9E] hover:text-[#003366] transition-colors flex items-center gap-1">
            <span>All Featured</span>
            <i data-lucide="chevron-right" class="size-4"></i>
          </a>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
          <!-- Main Featured Content -->
          <div class="lg:col-span-3">
            <div class="relative h-80 md:h-96 rounded-xl overflow-hidden shadow-md mb-6">
              <img 
                src="{{ featured_article.image }}" 
                alt="{{ featured_article.title }}"
                class="w-full h-full object-cover"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-[#003366]/80 via-[#003366]/30 to-transparent"></div>
              <div class="absolute bottom-0 left-0 right-0 p-6">
                <span class="inline-block bg-[#2D8C9E] text-white px-3 py-1 text-sm rounded-full mb-2">
                  {{ featured_article.category }}
                </span>
                <h3 class="text-2xl sm:text-3xl font-bold text-white mb-2">{{ featured_article.title }}</h3>
                <div class="flex items-center gap-4 text-white/80 text-sm">
                  <div class="flex items-center gap-1">
                    <i data-lucide="user" class="size-4"></i>
                    <span>{{ featured_article.author }}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <i data-lucide="calendar" class="size-4"></i>
                    <span>{{ featured_article.date }}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <i data-lucide="clock" class="size-4"></i>
                    <span>{{ featured_article.read_time }}</span>
                  </div>
                </div>
              </div>
            </div>
            
            <p class="text-lg text-[#0F2B4C] mb-6 leading-relaxed">
              {{ featured_article.excerpt }}
            </p>
            
            <div class="prose prose-blue max-w-none text-[#0F2B4C] mb-6">
              {{ featured_article.content|safe }}
            </div>
            
            <div class="flex items-center justify-between">
              <div class="flex flex-wrap gap-2">
                {% for tag in featured_article.tags %}
                  <span class="inline-block bg-[#F0F8FF] text-[#003366] border border-[#2D8C9E]/20 px-3 py-1 text-sm rounded-full">
                    {{ tag }}
                  </span>
                {% endfor %}
              </div>
              
              <div class="flex items-center gap-4">
                <button class="flex items-center gap-1 text-[#0F2B4C] hover:text-[#2D8C9E] transition-colors">
                  <i data-lucide="thumbs-up" class="size-5"></i>
                  <span>{{ featured_article.likes }}</span>
                </button>
                <button class="flex items-center gap-1 text-[#0F2B4C] hover:text-[#2D8C9E] transition-colors">
                  <i data-lucide="message-square" class="size-5"></i>
                  <span>{{ featured_article.comments }}</span>
                </button>
                <button class="flex items-center gap-1 text-[#0F2B4C] hover:text-[#2D8C9E] transition-colors">
                  <i data-lucide="share-2" class="size-5"></i>
                </button>
                <button class="flex items-center gap-1 text-[#0F2B4C] hover:text-[#2D8C9E] transition-colors">
                  <i data-lucide="bookmark" class="size-5"></i>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Sidebar with Recent Articles -->
          <div class="lg:col-span-2">
            <div class="bg-[#F0F8FF]/70 rounded-xl p-6">
              <h3 class="text-xl font-bold text-[#003366] mb-4">Recent Articles</h3>
              <div class="space-y-4">
                {% for article in recent_news %}
                  <div class="flex gap-3 pb-4 border-b border-[#003366]/10 {% if loop.last %}last:border-0 last:pb-0{% endif %}">
                    <div class="w-20 h-20 flex-shrink-0 rounded-md overflow-hidden">
                      <img 
                        src="{{ article.image }}" 
                        alt="{{ article.title }}"
                        class="w-full h-full object-cover"
                      />
                    </div>
                    <div class="flex-1">
                      <span class="inline-block bg-[#003366]/10 text-[#003366] px-2 py-0.5 text-xs rounded-full mb-1">
                        {{ article.category }}
                      </span>
                      <h4 class="font-bold text-[#003366] line-clamp-2 mb-1 hover:text-[#2D8C9E] transition-colors">
                        <a href="/news/article/{{ article.id }}">{{ article.title }}</a>
                      </h4>
                      <div class="flex items-center text-[#0F2B4C]/70 text-xs gap-3">
                        <span>{{ article.date }}</span>
                        <span>{{ article.read_time }}</span>
                      </div>
                    </div>
                  </div>
                {% endfor %}
              </div>
              <div class="mt-6">
                <a href="/news/articles" class="block w-full text-center bg-[#003366] text-white hover:bg-[#0A4380] py-2 px-4 rounded-full transition-colors">
                  View All Articles
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- News Categories Section -->

  <section class="py-16 bg-[#F0F8FF]/30" 
  x-data="{
    articles: [],
    categories: [],
    tags: [],
    category: 'All',
    currentPage: 1,
    articlesPerPage: 6,
    
    init() {
      // Initialize with server data or fallback data
      try {
        // Parse the server data with proper JSON handling
        this.articles = JSON.parse(document.getElementById('articles-data').textContent) || [];
        this.categories = JSON.parse(document.getElementById('categories-data').textContent) || [];
        this.tags = JSON.parse(document.getElementById('tags-data').textContent) || [];
      } catch (error) {
        console.error('Error parsing article data:', error);
        this.articles = this.getFallbackArticles();
        this.categories = this.getFallbackCategories();
        this.tags = this.getFallbackTags();
      }
    },
    
    // Fallback methods in case server data fails
    getFallbackArticles() {
      return [
        {
          id: 5,
          title: 'The Evolution of Swahili Music: Traditional to Contemporary',
          excerpt: 'Exploring the rich musical journey from traditional taarab to modern afrofusion sounds.',
          author: 'David Ndungu',
          date: 'February 10, 2025',
          read_time: '6 min read',
          category: 'Cultural Heritage',
          image: '/static/img/news/swahili-music.jpg'
        },
        {
          id: 6,
          title: 'Kiswahili in the Digital Age: Language Preservation Through Technology',
          excerpt: 'How digital tools and platforms are helping to preserve and promote Swahili language learning.',
          author: 'Leila Mohammed',
          date: 'January 25, 2025',
          read_time: '5 min read',
          category: 'Language',
          image: '/static/img/news/digital-language.jpg'
        },
        {
          id: 7,
          title: 'Swahili Fashion Week Highlights Cultural Fusion in Modern Design',
          excerpt: 'Designers showcase innovative creations blending traditional textiles with contemporary styles.',
          author: 'Grace Kimani',
          date: 'January 12, 2025',
          read_time: '4 min read',
          category: 'Fashion',
          image: '/static/img/news/fashion-week.jpg'
        },
        {
          id: 8,
          title: 'The Art of Swahili Storytelling: Preserving Oral Traditions',
          excerpt: 'How traditional narratives and proverbs continue to shape contemporary Swahili culture.',
          author: 'Hassan Omar',
          date: 'December 18, 2024',
          read_time: '7 min read',
          category: 'Cultural Heritage',
          image: '/static/img/news/storytelling.jpg'
        },
        {
          id: 9,
          title: 'Exploring the Architectural Heritage of Swahili Coastal Towns',
          excerpt: 'The unique blend of Arabic, Indian, and African influences in historic Stone Town buildings.',
          author: 'Fatima Salim',
          date: 'November 30, 2024',
          read_time: '6 min read',
          category: 'Cultural Heritage',
          image: '/static/img/news/coastal-architecture.jpg'
        },
        {
          id: 10,
          title: 'Traditional Swahili Spices: A Culinary Journey Through East Africa',
          excerpt: 'Discovering the essential spice blends that give Swahili cuisine its distinctive flavor profile.',
          author: 'Ibrahim Juma',
          date: 'November 15, 2024',
          read_time: '5 min read',
          category: 'Cuisine',
          image: '/static/img/news/spices.jpg'
        }
      ];
    },
    
    getFallbackCategories() {
      return [
        { name: 'All', count: 24 },
        { name: 'Cultural Heritage', count: 8 },
        { name: 'Language', count: 6 },
        { name: 'Events', count: 5 },
        { name: 'Cuisine', count: 3 },
        { name: 'Fashion', count: 2 }
      ];
    },
    
    getFallbackTags() {
      return [
        { name: 'Swahili', count: 18 },
        { name: 'Culture', count: 15 },
        { name: 'East Africa', count: 12 },
        { name: 'Language', count: 10 },
        { name: 'UNESCO', count: 7 },
        { name: 'Heritage', count: 6 },
        { name: 'Music', count: 5 },
        { name: 'Dance', count: 5 },
        { name: 'Cuisine', count: 4 },
        { name: 'Fashion', count: 3 }
      ];
    },
    
    get filteredArticles() {
      return this.category === 'All' 
        ? this.articles 
        : this.articles.filter(article => article.category === this.category);
    },
    
    get totalPages() {
      return Math.ceil(this.filteredArticles.length / this.articlesPerPage);
    },
    
    get currentArticles() {
      const start = (this.currentPage - 1) * this.articlesPerPage;
      const end = start + this.articlesPerPage;
      return this.filteredArticles.slice(start, end);
    },
    
    setCategory(newCategory) {
      this.category = newCategory;
      this.currentPage = 1; // Reset to first page when changing category
    },
    
    getCategoryCount(categoryName) {
      const category = this.categories.find(c => c.name === categoryName);
      return category ? category.count : 0;
    }
  }"
>
  <!-- Hidden JSON data elements to safely pass server data -->
  <script type="application/json" id="articles-data">
    {{ all_articles|tojson|safe }}
  </script>
  <script type="application/json" id="categories-data">
    {{ article_categories|tojson|safe }}
  </script>
  <script type="application/json" id="tags-data">
    {{ popular_tags|tojson|safe }}
  </script>

  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-2xl font-bold text-[#003366] mb-8">Browse All Articles</h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sidebar with filters -->
        <div class="order-2 lg:order-1">
          <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <h3 class="text-lg font-bold text-[#003366] flex items-center gap-2 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5"><path d="M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"></path></svg>
              <span>Categories</span>
            </h3>
            <div class="space-y-2">
              <template x-for="cat in categories" :key="cat.name">
                <button @click="setCategory(cat.name)" 
                        :class="`flex items-center justify-between w-full px-3 py-2 rounded-lg transition-colors ${
                            category === cat.name 
                              ? 'bg-[#003366] text-white' 
                              : 'hover:bg-[#F0F8FF] text-[#0F2B4C]'
                          }`">
                  <span x-text="cat.name"></span>
                  <span :class="`inline-block py-0.5 px-2 rounded-full text-xs ${
                      category === cat.name 
                        ? 'bg-white text-[#003366]' 
                        : 'bg-[#F0F8FF] text-[#0F2B4C]'
                    }`" x-text="cat.count">
                  </span>
                </button>
              </template>
            </div>
          </div>
          
          <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <h3 class="text-lg font-bold text-[#003366] flex items-center gap-2 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>
              <span>Popular Tags</span>
            </h3>
            <div class="flex flex-wrap gap-2">
              <template x-for="tag in tags" :key="tag.name">
                <a :href="`/news/tag/${tag.name.toLowerCase()}`" class="inline-block bg-[#F0F8FF] hover:bg-[#2D8C9E] hover:text-white px-3 py-1 text-sm rounded-full text-[#0F2B4C] transition-colors">
                  <span x-text="`${tag.name} (${tag.count})`"></span>
                </a>
              </template>
            </div>
          </div>
          
          <div class="bg-[#003366] rounded-xl shadow-sm p-6 text-white">
            <h3 class="text-lg font-bold flex items-center gap-2 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"></path><rect x="2" y="4" width="20" height="16" rx="2"></rect></svg>
              <span>Subscribe to Newsletter</span>
            </h3>
            <p class="text-white/80 text-sm mb-4">
              Stay updated with our latest news and articles delivered directly to your inbox.
            </p>
            <form action="/subscribe" method="post" class="space-y-3">
              <input type="email" name="email" placeholder="Your email address" class="w-full bg-white/10 border border-white/20 text-white placeholder:text-white/50 px-4 py-2 rounded-md" required>
              <button type="submit" class="w-full bg-white text-[#003366] hover:bg-[#D4AF37] hover:text-[#003366] py-2 px-4 rounded-md transition-colors">
                Subscribe
              </button>
            </form>
          </div>
        </div>
        
        <!-- Main content area -->
        <div class="order-1 lg:order-2 lg:col-span-3">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5 text-[#2D8C9E]"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>
              <span class="text-[#0F2B4C]">
                <strong x-text="filteredArticles.length"></strong> articles in <strong x-text="category"></strong>
              </span>
            </div>
            
            <div class="flex items-center gap-2">
              <label for="sort" class="text-[#0F2B4C] text-sm">Sort by:</label>
              <select id="sort" class="bg-white border border-[#003366]/20 rounded-md px-2 py-1 text-[#0F2B4C] text-sm">
                <option>Most Recent</option>
                <option>Most Popular</option>
                <option>A-Z</option>
              </select>
            </div>
          </div>
          
          <!-- Articles Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <template x-for="article in currentArticles" :key="article.id">
              <div class="bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-[#E5E7EB]">
                <div class="relative h-48">
                  <img :src="article.image" :alt="article.title" 
                       @error="$el.src = '/static/images/placeholder/placeholder-article.jpg'" 
                       class="w-full h-full object-cover">
                  <span class="absolute top-4 left-4 bg-[#2D8C9E] text-white px-3 py-1 text-sm rounded-full" x-text="article.category"></span>
                </div>
                <div class="p-6">
                  <h3 class="text-xl font-bold text-[#003366] mb-2 line-clamp-2 hover:text-[#2D8C9E] transition-colors">
                    <a :href="`/news/article/${article.id}`" x-text="article.title"></a>
                  </h3>
                  <p class="text-[#0F2B4C] text-sm mb-4 line-clamp-2" x-text="article.excerpt"></p>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2 text-[#0F2B4C]/70 text-xs">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4 text-[#2D8C9E]"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                      <span x-text="article.author"></span>
                    </div>
                    <div class="flex items-center gap-4 text-[#0F2B4C]/70 text-xs">
                      <div class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4 text-[#2D8C9E]"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" y1="2" y2="6" x2="16"></line><line x1="8" y1="2" y2="6" x2="8"></line><line x1="3" y1="10" y2="10" x2="21"></line></svg>
                        <span x-text="article.date"></span>
                      </div>
                      <div class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-4 text-[#2D8C9E]"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                        <span x-text="article.read_time"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </template>
          </div>
          
          <!-- Empty state message when no articles match the filter -->
          <div x-show="filteredArticles.length === 0" class="bg-white rounded-lg p-8 text-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-12 mx-auto text-[#2D8C9E]/30 mb-4"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            <p class="text-lg text-[#0F2B4C]">No articles found in this category</p>
            <button @click="setCategory('All')" class="mt-4 text-[#2D8C9E] hover:text-[#003366]">View all articles</button>
          </div>
          
          <!-- Pagination -->
          <div class="flex justify-center gap-2 mt-8" x-show="totalPages > 1">
            <button @click="currentPage = Math.max(currentPage - 1, 1)" 
                    :disabled="currentPage === 1" 
                    class="p-2 rounded-full border border-[#003366] disabled:opacity-50 disabled:cursor-not-allowed">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5 text-[#003366]"><path d="m15 18-6-6 6-6"></path></svg>
            </button>
            
            <template x-for="i in totalPages" :key="i">
              <button @click="currentPage = i" 
                      :class="`w-10 h-10 rounded-full flex items-center justify-center ${
                          currentPage === i 
                            ? 'bg-[#003366] text-white' 
                            : 'border border-[#003366] text-[#003366]'
                        }`" 
                      x-text="i"></button>
            </template>
            
            <button @click="currentPage = Math.min(currentPage + 1, totalPages)" 
                    :disabled="currentPage === totalPages" 
                    class="p-2 rounded-full border border-[#003366] disabled:opacity-50 disabled:cursor-not-allowed">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-5 text-[#003366]"><path d="m9 18 6-6-6-6"></path></svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

  <!-- Press Releases Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-[#003366]">Press Releases</h2>
          <a href="/news/press" class="text-[#2D8C9E] hover:text-[#003366] transition-colors flex items-center gap-1">
            <span>All Press Releases</span>
            <i data-lucide="chevron-right" class="size-4"></i>
          </a>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {% for release in press_releases %}
            <div class="bg-white rounded-lg border border-[#E5E7EB] shadow-sm hover:shadow-md transition-shadow">
              <div class="p-6">
                <span class="inline-block bg-[#F0F8FF] text-[#003366] px-3 py-1 text-xs rounded-full mb-3">Press Release</span>
                <h3 class="text-lg font-bold text-[#003366] mb-2 line-clamp-2 hover:text-[#2D8C9E] transition-colors">
                  <a href="/news/press/{{ release.id }}">{{ release.title }}</a>
                </h3>
                <p class="text-[#0F2B4C] text-sm mb-4">
                  {{ release.excerpt }}
                </p>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-1 text-[#0F2B4C]/70 text-xs">
                    <i data-lucide="calendar" class="size-4 text-[#2D8C9E]"></i>
                    <span>{{ release.date }}</span>
                  </div>
                  <a 
                    href="/news/press/{{ release.id }}" 
                    class="inline-flex items-center text-[#2D8C9E] hover:text-[#003366] transition-colors"
                  >
                    Read More <i data-lucide="chevron-right" class="size-4 ml-1"></i>
                  </a>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- Media Gallery Section -->
  <section class="py-16 bg-[#F0F8FF]/30" x-data="{ activeCategory: 'All' }">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-[#003366]">Media Gallery</h2>
          <a href="/media/gallery" class="text-[#2D8C9E] hover:text-[#003366] transition-colors flex items-center gap-1">
            <span>Full Gallery</span>
            <i data-lucide="chevron-right" class="size-4"></i>
          </a>
        </div>
        
        <div class="flex justify-center mb-6">
          <div class="bg-white shadow-sm rounded-full p-1 border border-[#003366]/10 inline-flex">
            {% for category in ['All', 'Photos', 'Videos', 'Audio'] %}
              <button 
                @click="activeCategory = '{{ category }}'"
                :class="`px-6 py-2 rounded-full transition-colors ${
                  activeCategory === '{{ category }}' 
                    ? 'bg-[#003366] text-white' 
                    : 'text-[#003366] hover:bg-[#F0F8FF]'
                }`"
              >
                {{ category }}
              </button>
            {% endfor %}
          </div>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {% for item in media_items %}
            <div 
              x-show="activeCategory === 'All' || activeCategory.toLowerCase() === '{{ item.type }}'.toLowerCase()"
              x-transition:enter="transition ease-out duration-300"
              x-transition:enter-start="opacity-0 transform scale-95"
              x-transition:enter-end="opacity-100 transform scale-100"
              class="group relative rounded-xl overflow-hidden shadow-sm"
            >
              <div class="aspect-square">
                <img 
                  src="{{ item.thumbnail }}" 
                  alt="{{ item.title }}"
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                />
              </div>
              
              <!-- Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-[#003366]/90 via-[#003366]/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4">
                <h3 class="text-white font-bold mb-1">{{ item.title }}</h3>
                <div class="flex items-center justify-between">
                  <div class="text-white/80 text-sm">{{ item.date }}</div>
                  {% if item.duration %}
                    <span class="inline-block bg-[#D4AF37] text-[#003366] px-2 py-0.5 text-xs rounded-full">
                      {{ item.duration }}
                    </span>
                  {% endif %}
                </div>
              </div>
              
              <!-- Type indicator -->
              <div class="absolute top-3 right-3">
                <span class="inline-block 
                  {% if item.type == 'video' %}
                    bg-[#C62828]
                  {% elif item.type == 'audio' %}
                    bg-[#2D8C9E]
                  {% else %}
                    bg-[#003366]
                  {% endif %} 
                  text-white px-2 py-0.5 text-xs rounded-full"
                >
                  {{ item.type }}
                </span>
              </div>
            </div>
          {% endfor %}
        </div>
        
        <div class="mt-8 text-center">
          <a href="/media/gallery" class="inline-block bg-[#003366] text-white hover:bg-[#0A4380] px-8 py-3 rounded-full shadow-md transition-colors">
            Browse Full Gallery
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Social Media Feed Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-[#003366]">Social Media</h2>
          <div class="flex items-center gap-3">
            <a href="{{ social_links.facebook }}" class="text-[#1877F2] hover:text-[#1877F2]/80 transition-colors">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" />
              </svg>
            </a>
            <a href="{{ social_links.twitter }}" class="text-[#1DA1F2] hover:text-[#1DA1F2]/80 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
                </svg>
              </a>
              <a href="{{ social_links.instagram }}" class="text-[#E4405F] hover:text-[#E4405F]/80 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                </svg>
              </a>
              <a href="{{ social_links.linkedin }}" class="text-[#0077B5] hover:text-[#0077B5]/80 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                </svg>
              </a>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {% for post in social_posts %}
              <div class="bg-white rounded-lg border border-[#E5E7EB] shadow-sm hover:shadow-md transition-shadow">
                <div class="p-6">
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                      {% if post.platform == 'facebook' %}
                        <svg class="w-5 h-5 text-[#1877F2]" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" />
                        </svg>
                      {% elif post.platform == 'twitter' %}
                        <svg class="w-5 h-5 text-[#1DA1F2]" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
                        </svg>
                      {% elif post.platform == 'instagram' %}
                        <svg class="w-5 h-5 text-[#E4405F]" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                      {% endif %}
                      <span class="capitalize font-medium text-[#0F2B4C]">{{ post.platform }}</span>
                    </div>
                    <span class="text-[#0F2B4C]/60 text-xs">{{ post.date }}</span>
                  </div>
                  
                  <p class="text-[#0F2B4C] mb-4">{{ post.content }}</p>
                  
                  <div class="text-[#0F2B4C]/60 text-xs">{{ post.engagement }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
          
          <div class="mt-8 text-center">
            <a href="/social" class="inline-block bg-[#2D8C9E] text-white hover:bg-[#247A8A] rounded-full px-8 py-3 shadow-md transition-colors">
              Follow Us
            </a>
          </div>
        </div>
      </div>
    </section>
  
    <!-- Newsletter Subscription Section -->
    <section class="py-16 bg-[#003366] text-white">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <h2 class="text-3xl sm:text-4xl font-bold mb-4">
            Stay Updated with Swahili Culture
          </h2>
          <p class="text-lg text-white/80 mb-8 max-w-2xl mx-auto">
            Subscribe to our newsletter and be the first to receive the latest news, articles, and event announcements from Swahili Afro Jamboree.
          </p>
          
          <form 
            action="/subscribe" 
            method="post"
            class="flex flex-col sm:flex-row gap-4 max-w-xl mx-auto"
          >
            <input 
              type="email"
              name="email" 
              placeholder="Your email address" 
              class="flex-1 bg-white/10 border border-white/20 text-white placeholder:text-white/50 py-4 pl-6 rounded-full"
              required
            />
            <button 
              type="submit"
              class="bg-[#D4AF37] text-[#003366] hover:bg-[#c29b2a] rounded-full px-8 py-4 font-medium shadow-md transition-colors"
            >
              Subscribe
            </button>
          </form>
          
          <p class="text-white/60 text-sm mt-4">
            We respect your privacy. Unsubscribe at any time.
          </p>
        </div>
      </div>
    </section>
  {% endblock %}
  
  {% block scripts %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      lucide.createIcons();
    });
  </script>
  {% endblock %}
  